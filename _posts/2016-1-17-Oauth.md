---
layout: post
title: OAuth 2.0
cover: cover.jpg
---


* * *
<br>

# OAuth 2.0 프로토콜


현재(2016.1.17)의 대형 업체들은 2.0 버전을 주로 사용하고 있다. 

OAuth의 등장은 여러 니즈에 의해 등장했다고 생각 된다. 

간단히 OAuth 2.0에 대해서 정의하면 

`외부 애플리케이션에서 HTTP 서비스에 제한된 접근을 할 수 있도록 권한을 부여(Authorize)하는 프레임워크`

라고 할 수 있다. 

인증이나 보안을 위해서는 기본 개념적으로 공통 인자(정보)가 필요하다. 이것은 직접적인 키가 될 수도 있고 간접적인 키(공개 키 암호에서 비밀 키?) 일 수도 있지만 결국 기존 방식으로는 오픈된 클라이언트(사용자 애플리케이션,웹브라우저상에서 작동)에서는 소스코드가 노출 될 수 밖에 없다. 


이런 경험은 공공기관에서 제공하는 정보 제공용 API를 사용하다보면 발급 받는 키를 사용할 때 우려했던 점이기도 하다. 안드로이드 앱으로 특정하고 보면 결국 어플을 다운 받는 사용자는 어떻게든 어플의 상세 내용을 분석해서 확인 할 수 있다. 물론 이를 막기 위한 소스 암호화 장치도 있긴 하지만 결국 클라이언트 소스 안에 키를 소유하고 있는 것은 사실이다. 이 키를 사용해서 다른 사용자들이 그대로 API를 사용할 수도 있다. 

(물론 이런 경우 사용자의 개인 정보에 관련된 내용은 없는 것이 일반적이다. 어떻게든 방식과 절차를 따르면 쉽게 키를 받을 수 있으므로 큰 문제가 되지 않을지도 모른다.)

하지만 OAuth를 이용하면 웹을 기준으로 하는 'Authorization Code'에서는 소스가 공개되지 않는 웹 서버 애플리케이션의 경우 키를 공개하지 않을 수 있다.

또한 정보가 이동하는 방식도 직접적인 id와 password가 이동하는 것이 아닌 액세스 토큰이 이동하게 된다. 이 엑세스 토큰 자체가 어플리케이션의 서비스의 인증을 담당하고 임시적인(매번 그 키가 변경되는) 방식으로 작동하므로 좀 더 보안적으로 좋다.

다만 여기에도 약간 문제가 있을 법한 요소로는 예전 안드로이드 어플을 개발하면서 사용했었던 구글 API의 경우 OAuth의 'Client Credentials'을 사용하므로 서비스 되는 앱에서도 이 해당 키가 포함이 된다. 이 정보와 함께 개발자의 서명을 디버그나 릴리즈 빌드를 할 때 담기 때문에 인증된 개발 출처가 아니면 토큰을 제공하진 않지만 결국 정보적으로 어떻게든 노출이 되는 것은 사실이다.

--- 
<br>

또한 핵심은 권한의 조절이다. 요즘 서비스의 경우 같은 아이디와 비밀번호를 공유하면서도 제공할 정보의 단계를 나누는 것이 중요한 시대가 되었다. 이전 아이디와 패스워드를 제공하는 방식으로는 결국 이 정보를 바탕으로 사용자의 기능과 정보의 모든 권한을 얻는 것과 같은 상태가 된다. 하지만 OAuth의 경우 필요한 기능이나 정보에 따라 원하는 정보만 제공하고 받는 것이 가능하게 된다. 

---
<br>
### 추가적으로...


결국 1주차에서 기획을 발표했을 때 RESTful API 서버의 기능을 언급을 했었던 것이 사실이기도 하다. 사실 여기서는 인증적 측면으로는 크게 생각하지 않았었는데
OAuth에 대해서 들으면서 결국 서비스의 보안적 측면으로 사용할 수 있을 것이라는 생각이 들었다. (원래는 단순한 고정 키 발급을 생각했었다.)

물론 이 것과 관련된 내용은 시간이 많이 남고 여력이 있을 때 얘기이지만 이렇게 OAuth 2.0 프로토콜을 사용하는 인증 서버를 만드는 것도 많은 의미가 있지 않을까 싶다. 

상세한 원리와 내용은 이미 인터넷에 많은 내용이 있으므로 담지 않는다.

---

## 마음에 드는 링크

[https://vinebrancho.wordpress.com/2014/05/19/oauth2-restapi-server](https://vinebrancho.wordpress.com/2014/05/19/oauth2-restapi-server-%EB%AA%A8%EB%B0%94%EC%9D%BC-%EC%95%B1%EC%9D%84-oauth2-0%EC%9C%BC%EB%A1%9C-%EC%A2%80-%EB%8D%94-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C/)


[http://www.slideshare.net/daumdna/daum-oauth20](http://www.slideshare.net/daumdna/daum-oauth20)
